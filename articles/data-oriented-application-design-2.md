---
title: "データ指向アプリケーションデザイン 2章 まとめ"
emoji: "🎩"
type: "idea"
topics: ["クエリ", "データモデル", "memo"]
published: true
---

# はじめに
データ指向アプリケーションデザインを読んでいるので自分の理解のためにメモをまとめます。  
概要では全体に書いてあること、詳細では概要のそれぞれの要素についてを書きます。

# 概要
データモデルとはデータの集合（関係性）を抽象化したものです。  
データの関係性が異なると向いていること、向いていないことが変わるためアプリケーションを構築する際に大きな影響を及ぼします。  
データモデルを表す方法は歴史的に色々な案が考案されてきており、当初はシンプルな階層構造で表されていましたが、そこからリレーショナルモデルなどに移り変わってきています。  
そして、現在よく使用されているデータモデルは3つあります。  
3つとはリレーショナルモデル、ドキュメントモデル、グラフモデルでありそれぞれ適している対象領域が異なります。(グラフデータをリレーショナルモデルで表すなどもできますが、一般的に扱いにくくなりやすいことがわかっています)  
上記の3つはデータの関係性の表現の仕方の他にスキーマに対する考え方も異なります。  
一般的にデータに対してドキュメントモデル、グラフモデルはスキーマレスであり、リレーショナルモデルはスキーマを強制します。  
しかし、アプリケーションにおいてデータが特定の構造を持つのであればスキーマの違いは、スキーマを明示的（書き込み時に強制する）のか、暗黙的（読み取り時に処理）するかの違いにしかなりません。  
これらのデータモデルの違いを理解し、自身のアプリケーションの要求にどのモデルが合うかを選択する必要があります。

# 詳細
ここでは概要で紹介した3つのデータモデルのリレーショナルモデル、ドキュメントモデル、グラフモデルについて説明を書きます。
- リレーショナルモデル  
リレーショナルモデルはデータ間の結合が得意なため多対他、多対一の関係性を表すのに向いています。  
結合が得意なのは各データが単なるタプルの集合でオープンに配置されているため、それぞれのテーブルの列に簡単に参照、他のテーブルとの関連付けを行いやすいためです。  
またスキーマオンライト(データの保存時にスキーマを強制する)であり、事前にデータの形式を決定するためこれはプログラミングにおけるコンパイラによる静的な型チェックに似ています。  
  

- ドキュメントモデル  
ドキュメントモデルは一つのid、keyに紐づくデータをまとめて書き込む、読み取ることが得意なため一対多の関係性を表すのに向いています。  
一つのkeyに対するデータが集まっている(階層構造になって取得できる)ような状況をローカリティに優れていると表現することもあります。  
またスキーマオンリード(データの構造を読み取り時に解釈する)であり、読み取り時にデータの形式を解釈するためこれはプログラミングにおける実行時の動的な型チェックに似ています。

  
- グラフモデル  
グラフモデルは多対多の関係を表すのに向いています。
リレーショナルモデルでも多対多の関係を表すことはできますが、事前に結合するための関係性をわかっている必要があります。  
グラフモデルでは求めるデータだけをわかっていればよくデータ同士の関係性を知っている必要がないため複雑なつながりも扱うことができます。


- 宣言的クエリと命令的クエリ
  - 宣言的クエリ  
  SQLなど、求める結果がどういう条件なのかを記載する方式。  
  目標をどのように達成するかは指定しないためデータベースなどの実装を隠蔽する。
  
  - 命令的クエリ  
  プログラミングなど、求める結果を得るための操作を指定した順序で行うように記載する方式。  
  目標を達成する方式を自分で指定する。
  
  - 宣言的な言語は実行結果だけを指定するので並列実行に向いていることがよくあります。
